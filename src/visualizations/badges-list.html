<link rel="import" href="../../../polymer/polymer-element.html">
<link rel="import" href="../../../polymer/lib/elements/dom-module.html">
<link rel="import" href="../../../polymer/lib/elements/dom-if.html">
<link rel="import" href="../../../polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../../../polymer/lib/elements/custom-style.html">

<link rel="import" href="../mixins/data-receiver-mixin.html">

<dom-module id="badges-list">
    <template>
        <style>
            :host {
                display: block;
            }

            .badge {
                background-color: #000;
                color: #fff;
                display: inline-block;
                padding-left: 8px;
                padding-right: 8px;
                text-align: center;
                border-radius: 10px;
                margin-right: 8px;
                margin-top: 2px;
                margin-bottom: 2px;
            }

            .badge-cell {
                text-align: right;
            }
        </style>
        <template is="dom-if" if="[[hasReceivedData]]">
            <table>
                <template is="dom-repeat" items="[[data]]">
                    <tr>
                        <td class="badge-cell">
                            <div class="badge">[[item.value]]</div>
                        </td>
                        <td class="badge-title-cell">
                            <div class="badge-title">[[item.title]]</div>
                        </td>
                    </tr>
                </template>
            </table>
        </template>
        <template is="dom-if" if="[[_showSpinner]]">
            <i id="spinner" class="fa fas fa-spinner fa-spin"></i>
        </template>
    </template>

    <script>
        /**
         * ## `badges-list`
         *
         * This is a component for a list of counter badges.
         *
         * @polymer
         * @customElement
         * @appliesMixin DataReceiverMixin
         * @demo demo/visualizations/badges_list_demo.html
         */
        class BadgesList extends DataReceiverMixin(Polymer.Element) {

            static get is() {
                return 'badges-list';
            }

            static get properties() {
                return {
                    /** Determines whether the loading spinner should be hidden. */
                    hideSpinner: {
                        type: Boolean,
                        value: false
                    },
                    _showSpinner: {
                        type: Boolean,
                        computed: '_computeShowSpinner(hideSpinner, hasReceivedData)'
                    }
                };
            }

            static get observers() {
                return [];
            }

            _computeShowSpinner(hideSpinner, hasReceivedData) {
                return !hideSpinner && !hasReceivedData;
            }
        }

        // Register custom element definition using standard platform API
        customElements.define(BadgesList.is, BadgesList);
    </script>
</dom-module>
