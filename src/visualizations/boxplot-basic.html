<link rel="import" href="../../../polymer/polymer-element.html">
<link rel="import" href="../../../polymer/lib/elements/dom-module.html">
<link rel="import" href="../mixins/plotly-mixin.html">
<link rel="import" href="../shared-styles/plotly-styles.html">

<dom-module id="boxplot-basic">
    <template>
        <style include="plotly-styles">
            :host {
                display: block;
            }
        </style>
        <div id="diagram"></div>
    </template>

    <script>
        /**
         * ## `boxplot-basic`
         *
         * This is a basic component for plotly box plots.
         *
         * For further information and deeper understanding visit the [Plotly box plot documentation](https://plot.ly/javascript/box-plots/).
         *
         * @polymer
         * @customElement
         * @demo demo/visualizations/boxplot_basic_demo.html
         */
        class BoxplotBasic extends PlotlyMixin(Polymer.Element) {

            static get is() {
                return 'boxplot-basic';
            }

            static get properties() {
                return {
                    /** Primary color of chart */
                    primarycolor: {
                        type: String,
                        value: 'rgba(0,0,0,1)',
                        reflectToAttribute: true
                    },
                    /** Accent color of chart */
                    accentcolor: {
                        type: String,
                        value: 'rgba(0,0,0,1)',
                        reflectToAttribute: true
                    },
                    /** Show arithmetic mean */
                    mean: {
                        type: Boolean,
                        value: false,
                        reflectToAttribute: true
                    },
                    xTitle: String,
                    yTitle: String
                };
            }

            static get observers() {
                return [];
            }

            /** Gets the container element of the diagram that should be rendered */
            getDiagram() {
                return this.$.diagram;
            }

            /** Gets the data of the plot */
            getPlotData(data) {
                let element = this;

                data.forEach((item) => {
                    item.type = 'box';

                    if (element.mean) {
                        item.boxmean = true;
                    }
        });
                data[0].marker = {
                    color: this.primarycolor
                };

                return data;
            }

            /** Gets the layout options of the plot */
            getLayout() {
                console.log(this.accentcolor);
                let layout = {
                    xaxis: {
                        title: this.xTitle,
                        zeroline: false,
                        tickmode: 'auto',
                        tickfont: {
                            size: 14,
                            color: this.accentcolor
                        }
                    },
                    yaxis: {
                        title: this.yTitle,
                        zeroline: false,
                        tickmode: 'auto',
                        tickfont: {
                            size: 14,
                            color: this.accentcolor
                        }
                    },
                    margin: {l: 50, r: 10, t: 10, b: 80}
                };

                return layout;
            }
        }

        // Register custom element definition using standard platform API
        customElements.define(BoxplotBasic.is, BoxplotBasic);
    </script>
</dom-module>
